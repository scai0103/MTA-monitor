function ApplicationController(e,t,a,r,n,o,i,s,c,d,l,u,m,p){t.batchStatus=null,t.currentUser=null,t.userRoles=d,t.isAuthenticated=p.isAuthenticated,t.isAuthorized=p.isAuthorized,t.isLoading=!1,t.currentNavItem=null,t.imageBasePath=m.imageBasePath,t.mapImagePath=m.mapImagePath,t.summaryData=null,t.stationImageBasePath=m.stationImageBasePath,t.tempBasePath=m.tempBasePath;var f=t.$on(l.loginSuccess,function(e){r.path("/devices")}),v=t.$on(l.notAuthenticated,function(e){n(function(){p.logout()},100)}),g=t.$on(l.notAuthorized,function(e){n(function(){p.logout()},100)}),h=0,S=t.$on(u.appLoading,function(e,a){n(function(){a.loading?h+=1:h-=1,t.isLoading=h>0},100)}),E=t.$on(u.appErrorNotify,function(e,t){var a=i("translate")(t.message);t.description&&(a+="<br/><code>"+t.description+"<code>"),c.error(a,i("translate")("ERROR"),{allowHtml:!0})}),N=t.$on(u.appInfoNotify,function(e,t){c.info(i("translate")(t.message),i("translate")("INFO"))}),D=t.$on(u.appSuccessNotify,function(e,t){c.success(i("translate")(t.message),i("translate")("SUCCESS"))});t.$on("$destroy",function(){f(),loginFailedListener(),v(),g(),S(),E(),N(),D()}),t.goto=function(e){r.path(e)},t.logout=function(){p.logout()},t.openCommandDashboard=function(){var e=t.currentUser.extra?t.currentUser.extra.commandDashboardURI:"",r=(t.currentUser.extra&&t.currentUser.extra.commandDashboardAuth,e.split("://")),n=r[0]+"://"+r[1];a.open(n,"_blank")},t.setBatchProgress=function(e){t.batchStatus=e},t.setCurrentUser=function(e){t.currentUser=e},t.setCurrentNavBarItem=function(e){n(function(){t.currentNavItem=e},100)},t.setSummaryData=function(e){t.summaryData=e},t.trustSrc=function(e){return s.trustAsResourceUrl(e)},t.trustHtml=function(e){return s.trustAsHtml(e)},t.isAuthenticated()&&p.getCurrentUser().then(function(e){t.setCurrentUser(e)},function(e){o.error(e.data)})}function AuditLogController(e,t,a,r,n,o,i){function s(s){var d=r.confirm().title(n("translate")("DELETE_CONFIRM_TITLE")).textContent(n("translate")("DELETE_CONFIRM_MSG")).ariaLabel(n("translate")("DELETE_CONFIRM_TITLE")).targetEvent(s).ok(n("translate")("OK")).cancel(n("translate")("CANCEL"));r.show(d).then(function(){var r=e.dateStart.setHours(0,0,0,0),n=e.dateEnd.setHours(23,59,59,0);o.deleteAuditLogs(r,n).then(function(){c()}).catch(function(e){a.error(e),t.$broadcast(i.appErrorNotify,{message:e.data.error,description:e.data.description})})},function(){})}function c(){var r=e.dateStart.setHours(0,0,0,0),n=e.dateEnd.setHours(23,59,59,0);o.getAuditLogs(r,n).then(function(t){e.logs=t.auditLogs}).catch(function(e){a.error(e),t.$broadcast(i.appErrorNotify,{message:e.data.error,description:e.data.description})})}var d=new Date,l=function(e,t){return new Date(new Date(e).setMonth(e.getMonth()-t))}(d,1),u=d;e.dateStart=l,e.dateEnd=u,e.deleteData=s,e.logs=[],e.pageTitle="AUDIT_LOG",e.query={order:"createdAt",limit:10,page:1,filter:""},e.refreshData=c,e.selected=[],function(){e.setCurrentNavBarItem(null),e.setSummaryData(null),c()}()}function DeviceDetailController(e,t,a,r,n,o,i,s,c,d,l,u,m,p,f,v){function g(){t.form.ticketForm&&(t.form.ticketForm.$setUntouched(),t.form.ticketForm.$setPristine(),X.deviceId=t.id,t.newTicket=angular.copy(X)),t.form.filtersForm&&(t.form.filtersForm.$setUntouched(),t.form.filtersForm.$setPristine(),t.chartFilters=angular.copy(Q))}function h(e){for(var a,r=0;r<t.commandsAvailable.length;r++){var n=t.commandsAvailable[r];if(n.name==e){a=n;break}}return!!a&&a.params}function S(r){for(var n=0;n<t.commandsAvailable.length;n++){var o=t.commandsAvailable[n];if(o.name==t.commandSelected.name){angular.extend(t.commandSelected,o);break}}var i=t.device,s={devices:[]};s.devices.push({id:i.name,title:i.displayName,address:i.address,command:t.commandSelected.command,parameters:t.commandSelected.parameters}),t.isCommandFormSubmitting=!0,d.sendCommand(s).then(function(a){t.isCommandFormSubmitting=!1,e.$broadcast(p.appSuccessNotify,{message:"COMMAND_SENT"}),t.commandSelected={},r.$setUntouched(),r.$setPristine()}).catch(function(r){a.error(r),t.isCommandFormSubmitting=!1,e.$broadcast(p.appErrorNotify,{message:r.data.error,description:r.data.description})})}function E(){if(t.device&&t.device.config){var e=t.device.address;return d.getDeviceLog(e).then(function(e){t.isLogAvailable=!0}).catch(function(e){a.error(e),t.isLogAvailable=!1})}}function N(r){var o=s.confirm().title(n("translate")("DELETE_CONFIRM_TITLE")).textContent(n("translate")("DELETE_CONFIRM_MSG")).ariaLabel(n("translate")("DELETE_CONFIRM_TITLE")).targetEvent(r).ok(n("translate")("OK")).cancel(n("translate")("CANCEL"));s.show(o).then(function(){d.deleteDevice(t.device.name,t.device).then(function(a){e.$broadcast(p.appSuccessNotify,{message:"DEVICE_DELETED"}),t.goto(t.returnToRoute)}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})},function(){})}function D(){ee(),te(),ae()}function C(){i("edit-device-nav").close(),t.editDeviceIsOpen=!1}function b(e){e.stopImmediatePropagation(),t.deviceDefaults=angular.copy(t.device),t.editDeviceIsOpen=!0,o(function(){i("edit-device-nav").open()},100)}function T(){var r=t.chartFilters;m.filterChart(t.dashboardId,r,t.id).then(function(e){t.kibanaDashUrl=e.iframeUrl,j()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function y(){if(!t.device||!t.device.config)return null;for(var e=t.device.config.stationName,a=0;a<t.stations.length;a++){var r=t.stations[a];if(r.name==e)return r}}function I(){if(!t.device||!t.device.config)return null;for(var e=t.device.config.templateName,a=0;a<t.templates.length;a++){var r=t.templates[a];if(r.name==e)return r}}function $(e){var a=t.device.services?t.device.services:{},r=null;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(o.custom){r=o;break}}return r&&r.customServices?r.customServices.find(function(t){return t.name===e}):null}function A(e,t){var a=$(e),r=(a&&a.outputJSON&&a.outputJSON.thresholds?a.outputJSON.thresholds:[]).find(function(e){return e.name==t});return r||null}function O(){d.getMaintenance(t.id).then(function(e){e&&(e.startDate=new Date(e.startTime),e.startDate.setHours(0),e.startDate.setMinutes(0),e.startDate.setSeconds(0),e.endDate=new Date(e.endTime),e.endDate.setHours(23),e.endDate.setMinutes(59),e.endDate.setSeconds(59)),t.downtime=e}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function _(e){try{JSON.parse(e)}catch(e){return!1}return!0}function L(){u.getTickets(t.id).then(function(e){t.tickets=e.tickets}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function M(){var r=t.newDowntime;r.startDate.setHours(0),r.startDate.setMinutes(0),r.startDate.setSeconds(0),r.endDate.setHours(23),r.endDate.setMinutes(59),r.endDate.setSeconds(59),r.startTime=r.startDate.getTime(),r.endTime=r.endDate.getTime(),t.isMaintenanceFormSubmitting=!0,d.scheduleMaintenance(t.device.name,r).then(function(a){t.isMaintenanceFormSubmitting=!1,e.$broadcast(p.appSuccessNotify,{message:"MAINTENANCE_SCHEDULED"}),O(),c.restartSyncPoller()}).catch(function(r){a.error(r),t.isMaintenanceFormSubmitting=!1,e.$broadcast(p.appErrorNotify,{message:r.data.error,description:r.data.description})})}function U(r){var o=s.confirm().title(n("translate")("DELETE_CONFIRM_TITLE")).textContent(n("translate")("DELETE_CONFIRM_MSG")).ariaLabel(n("translate")("DELETE_CONFIRM_TITLE")).targetEvent(r).ok(n("translate")("OK")).cancel(n("translate")("CANCEL"));s.show(o).then(function(){d.removeMaintenance(t.device.name,t.downtime).then(function(t){e.$broadcast(p.appSuccessNotify,{message:"MAINTENANCE_REMOVED"}),O(),c.restartSyncPoller()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})},function(){})}function k(){t.showDetailIframe=!1}function R(){t.showDetailIframe=!0,E()}function P(e,t){W(t.data)}function w(){t.showScreenshot=!1}function F(){t.showScreenshot=!0}function V(){t.newDowntime={author:t.currentUser.name+" "+t.currentUser.surname},O()}function G(){L()}function H(a,r){a.preventDefault(),a.stopPropagation(),e.$broadcast(p.appSuccessNotify,{message:r.message,description:r.description}),r.closeSideBar&&o(function(){t.editDeviceNavClose(),c.updateDeviceCachedData(r.data),c.restartSyncPoller()},0)}function B(t,a){t.preventDefault(),t.stopPropagation(),e.$broadcast(p.appErrorNotify,{message:a.message,description:a.description})}function x(){t.customFieldConfs=t.currentTemplate?t.currentTemplate.custom.templateFields:[]}function z(){t.stationFloors=t.currentStation?t.currentStation.custom.floors:[]}function W(t){if(!t)return a.debug("No data available"),void e.$broadcast(p.appErrorNotify,{message:"NO_DATA_AVAILABLE"});var r=JSON.stringify(t);Y!==r?(Y=r,J(t)):a.debug("Data not changed")}function J(e){t.setSummaryData(e.summary),t.random=(new Date).getTime(),t.areas=e.areas,t.lines=e.lines,t.devices=e.devices,t.stations=e.stations,t.templates=e.templates;for(var r=null,n=e.devices,o=0;o<n.length;o++)if(n[o].name===t.id){r=n[o];break}JSON.stringify(r)!==JSON.stringify(t.device)?(angular.forEach(r.services,function(e){_(e.output)&&(e.outputJSON=JSON.parse(e.output))}),t.device=r,t.commandsAvailable=r.custom.batchCommands,t.currentTemplate=I(),t.currentStation=y(),t.newTicket.deviceName=t.device.displayName,x(),z()):a.debug("Device data not changed")}function j(){angular.element(document.querySelector("#kibana-iframe")).remove();var e=document.createElement("iframe");e.src=t.kibanaDashUrl,e.id="kibana-iframe",angular.element(document.querySelector("#kibana-iframe-container")).html(e.outerHTML)}function K(){t.kibanaDashUrl="",g(),m.getDashboardUrl(t.dashboardId,t.id).then(function(e){t.kibanaDashUrl=e.iframeUrl,j()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function q(){var r=t.newTicket;t.isTicketFormSubmitting=!0,u.createTicket(r).then(function(a){t.isTicketFormSubmitting=!1,g(),L(),e.$broadcast(p.appSuccessNotify,{message:"TICKET_CREATED"})}).catch(function(r){a.error(r),t.isTicketFormSubmitting=!1,e.$broadcast(p.appErrorNotify,{message:r.data.error,description:r.data.description})})}var Y=null,Z=new Date,Q={from:new Date(Z.setHours(0,0,0,0)),to:new Date(Z.setHours(23,59,59,0)),device:-1,station:-1,template:-1},X={subject:"",description:"",deviceId:-1,deviceName:""};t.areas=[],t.chartFilters=Q,t.commandsAvailable=[],t.commandRequireParams=h,t.commandSelected={},t.commandSend=S,t.createTicket=q,t.currentStation=null,t.currentTemplate=null,t.customFieldConfs=[],t.editDeviceIsOpen=!1,t.dashboardId="",t.dashboards=[],t.deleteDevice=N,t.deviceDefaults={},t.device={},t.devices=[],t.downtime={},t.editDeviceNavClose=C,t.editDeviceNavOpen=b,t.filterChart=T,t.form={},t.fabIsOpen=!1,t.fabSelectedMode="md-scale",t.getCustomServiceValues=$,t.getCustomThresholdValues=A,t.groups=[],t.id=-1,t.isLogAvailable=!1,t.isMaintenanceFormSubmitting=!1,t.isCommandFormSubmitting=!1,t.isTicketFormSubmitting=!1,t.kibanaDashUrl="",t.lines=[],t.getTickets=L,t.maintenanceSchedule=M,t.maintenanceRemove=U,t.newDowntime={},t.newTicket={},t.onDetailTabDeSelect=k,t.onDetailTabSelect=R,t.onScreenshotTabDeSelect=w,t.onScreenshotTabSelect=F,t.onMaintenanceTabSelect=V,t.onTicketTabSelect=G,t.query={order:"id",limit:5,page:1},t.reset=K,t.random,t.returnToRoute=r.returnToRoute?"/devices/"+r.returnToRoute:"/devices",t.showDetailIframe=!1,t.showScreenshot=!1,t.selected=[],t.stationFloors=[],t.stations=[],t.templates=[],t.tickets=[];var ee=t.$on(f.wizardSuccess,H),te=t.$on(f.wizardFailed,B),ae=t.$on(v.syncSuccess,P);t.$on("$destroy",D),function(){t.setCurrentNavBarItem("devices"),t.setSummaryData({ok:"-",error:"-",warning:"-",maintenance:"-",lastUpdate:void 0}),t.id=r.id,g(),X.deviceId=t.id,t.newTicket=angular.copy(X),t.chartFilters=angular.copy(Q),c.getCachedSyncData().then(function(e){W(e),c.isSyncPollerRunning()||c.startSyncPoller()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})}),l.listGroups().then(function(e){t.groups=e.groups}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})}),m.listDashboards().then(function(e){t.dashboards=e.dashboards,t.dashboardId=t.dashboards.length>0?t.dashboards[0].id:""}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}()}function DevicesController(e,t,a,r,n,o,i,s,c,d,l,u,m,p,f,v,g){function h(e){if(!t.filters)return!0;var a=!1;if(a|=t.filters.filterStatusError&&!e.maintenance&&e.error,a|=t.filters.filterStatusWarning&&!e.maintenance&&!e.error&&e.warning,a|=t.filters.filterStatusOk&&!e.error&&!e.warning,a|=t.filters.filterStatusMaintenance&&e.maintenance,t.isAuthorized([t.userRoles.superadmin,t.userRoles.admin])){var r=t.filters.filterStatusProduction&&e.config.production;a&=r|=t.filters.filterStatusNoProduction&&!e.config.production}else a&=e.config.production;var n=t.filters.filterStationSelected;a&=null==n||0==n.length||n.includes(e.config.stationName);var o=t.filters.filterLineSelected;a&=null==o||0==o.length||H(e.config.lineNames,o);var i=t.searchTerm&&t.searchTerm.term?t.searchTerm.term.trim().toLowerCase():null;return i&&""!==i&&(a&=e.displayName.toLowerCase().search(i)>-1||e.address.toLowerCase().search(i)>-1),a}function S(e){e&&(e.$setPristine(),e.$setUntouched()),t.commandsAvailable=[],t.commandSelected={}}function E(e){e&&(e.$setPristine(),e.$setUntouched()),t.updateDevicesCommandSelected={}}function N(){angular.forEach(t.deviceCheckedIds,function(e,a){t.deviceCheckedIds[a]=!1})}function D(e){for(var a,r=0;r<t.commandsAvailable.length;r++){var n=t.commandsAvailable[r];if(n.name==e){a=n;break}}return!!a&&a.params}function C(r){for(var n=0;n<t.commandsAvailable.length;n++){var o=t.commandsAvailable[n];if(o.name==t.commandSelected.name){angular.extend(t.commandSelected,o);break}}var i={devices:[]};angular.forEach(t.devices,function(e){t.deviceCheckedIds[e.name]&&i.devices.push({id:e.name,title:e.displayName,address:e.address,command:t.commandSelected.command,commandName:t.commandSelected.name,parameters:t.commandSelected.parameters,type:"CMD"})}),s.sendCommand(i).then(function(a){e.$broadcast(p.appSuccessNotify,{message:"COMMAND_SENT"}),t.commandsNavClose(r)}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function b(e){t.clearDeviceCommandForm(e),i("commands-nav").close()}function T(e){e.stopImmediatePropagation(),t.isOneDeviceAvailable=!1,angular.forEach(t.devices,function(e){t.deviceCheckedIds[e.name]&&(0==t.commandsAvailable.length?t.commandsAvailable=e.custom.batchCommands:t.commandsAvailable=n("intersect")(t.commandsAvailable,e.custom.batchCommands),t.isOneDeviceAvailable=!0)}),i("commands-nav").open()}function y(){ie(),se(),ce(),de()}function I(e){angular.forEach(t.deviceCheckedIds,function(a,r){t.deviceCheckedIds[r]=e})}function $(){i("edit-device-nav").close(),t.editDeviceIsOpen=!1}function A(e){e.stopImmediatePropagation(),i("edit-device-nav").open(),t.editDeviceIsOpen=!0}function O(){i("filters-nav").close()}function _(e){e.stopImmediatePropagation(),i("filters-nav").open()}function M(e,t){var a=e.services?e.services:{},r=null;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(o.custom){r=o;break}}return r&&r.customServices?r.customServices.find(function(e){return e.name===t}):null}function U(r){for(var n=0;n<t.updateDevicesCommands.length;n++){var o=t.updateDevicesCommands[n];if(o.name==t.updateDevicesCommandSelected.name){angular.extend(t.updateDevicesCommandSelected,o);break}}var i={devices:[]};angular.forEach(t.devices,function(e){if(t.deviceCheckedIds[e.name])if(t.updateDevicesCommandSelected.name==ae){var a=JSON.parse(JSON.stringify(e));a.config.production=t.updateDevicesCommandSelected.parameters||!1,i.devices.push({id:e.name,title:e.displayName,address:e.address,commandName:t.updateDevicesCommandSelected.name,parameters:a,type:t.updateDevicesCommandSelected.type})}else if(t.updateDevicesCommandSelected.name==re){var r=t.updateDevicesCommandSelected.parameters;r.startDate.setHours(0),r.startDate.setMinutes(0),r.startDate.setSeconds(0),r.endDate.setHours(23),r.endDate.setMinutes(59),r.endDate.setSeconds(59),r.startTime=r.startDate.getTime(),r.endTime=r.endDate.getTime(),i.devices.push({id:e.name,title:e.displayName,address:e.address,commandName:t.updateDevicesCommandSelected.name,parameters:r,type:t.updateDevicesCommandSelected.type})}else i.devices.push({id:e.name,title:e.displayName,address:e.address,commandName:t.updateDevicesCommandSelected.name,parameters:t.updateDevicesCommandSelected.parameters,type:t.updateDevicesCommandSelected.type})}),s.updateDevices(i).then(function(t){e.$broadcast(p.appSuccessNotify,{message:"COMMAND_SENT"}),l.setLocalBatchData(t)}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}function k(e){t.clearUpdateDevicesForm(e),i("updatedevices-nav").close()}function R(e){e.stopImmediatePropagation(),i("updatedevices-nav").open()}function P(){i("uploaddevice-nav").close()}function w(e){e.stopImmediatePropagation(),i("uploaddevice-nav").open()}function F(e){var a=[];return e&&angular.forEach(t.devices,function(t){e[t.name]&&a.push('<span class="tag">'+t.displayName+"</span>")}),t.trustHtml(a.join(""))}function V(e){for(var t=!0,a=!1,r=!1,n=!0,o=0;o<e.length;o++){var i=e[o].private,s=[],c=!1,d=!1,l=!0;angular.forEach(i.devices,function(e){h(e)&&(s.push(e),c|=e.error,d|=e.warning,l&=e.maintenance)}),l&=s.length>0,t&=0===s.length,r|=0==(a|=0==l&&c)&&d,n&=l}var u={code:"OK",class:"marker-cluster-ok",hostClass:"ok-host"};return n?(u.code="MNT",u.class="marker-cluster-maintenance",u.hostClass="maintenance-host"):a?(u.code="ERR",u.class="marker-cluster-error",u.hostClass="error-host"):r?(u.code="WAR",u.class="marker-cluster-warning",u.hostClass="warning-host"):t&&(u.code="MTY",u.class="marker-cluster-empty",u.hostClass="empty-host"),u}function G(e){var t=[],a=!1,r=!1,n=!1,o=!0;angular.forEach(e.devices,function(e){h(e)&&(t.push(e),r|=e.error,n|=e.warning,o&=e.maintenance)}),a=0===t.length;var i={code:"OK",class:"marker-cluster-ok",hostClass:"ok-host"};return(o&=t.length>0)?(i.code="MNT",i.class="marker-cluster-maintenance",i.hostClass="maintenance-host"):r?(i.code="ERR",i.class="marker-cluster-error",i.hostClass="error-host"):n?(i.code="WAR",i.class="marker-cluster-warning",i.hostClass="warning-host"):a&&(i.code="MTY",i.class="marker-cluster-empty",i.hostClass="empty-host"),i}function H(e,t){return e.some(function(e){return t.includes(e)})}function B(e){i(e).close()}function x(e){i(e).toggle()}function z(e,a){t.batchStatus=a.data,d.restartSyncPoller()}function W(e){t.commandSelected&&(t.commandSelected.parameters=void 0)}function J(e,t){Z(t.data)}function j(e){ne&&(N(),Q(JSON.parse(ne)))}function K(e){t.updateDevicesCommandSelected&&(t.updateDevicesCommandSelected.parameters=void 0,t.updateDevicesCommandSelected.name==t.UPDATE_DEVICES_COMMAND_ADD_MAINTENANCE&&(t.updateDevicesCommandSelected.parameters={author:t.currentUser.name+" "+t.currentUser.surname}))}function q(a,n){a.preventDefault(),a.stopPropagation(),e.$broadcast(p.appSuccessNotify,{message:n.message}),n.closeSideBar&&r(function(){t.editDeviceNavClose(),d.updateDeviceCachedData(n.data),d.restartSyncPoller()},0)}function Y(t,a){t.preventDefault(),t.stopPropagation(),e.$broadcast(p.appErrorNotify,{message:a.message,description:a.description})}function Z(t){if(!t)return a.debug("No data available"),void e.$broadcast(p.appErrorNotify,{message:"NO_DATA_AVAILABLE"});var r=JSON.stringify(t);ne!==r?(ne=r,Q(t)):a.debug("Data not changed")}function Q(e){t.setSummaryData(e.summary),t.areas=e.areas,t.lines=e.lines,t.stations=e.stations,t.templates=e.templates;var a={},r=[],n={},o={},i={},s=e.stationsTree||[];angular.forEach(s,function(e,s){var c=e.name,d=e.displayName,l=e.custom.position.lat,m=e.custom.position.lng;e.custom.lineNames;if(c!==te){var p=[];for(s in e.devices){var f=e.devices[s];h(f)&&p.push(f)}e.devicesFiltered=p;var v={station:e,deviceNumberViewLimit:t.deviceNumberViewLimit,goto:t.goto,showMore:function(e){t.goto("stationDetails/"+e+"/list/devices/map")}},g=G(e);a[c]={lat:l,lng:m,title:d,icon:{type:"div",iconSize:[40,40],html:"<div><span><b>"+g.code+"</b></span></div>",className:"marker-cluster "+g.class,popupAnchor:[0,0]},popupTemplate:u,popupContent:v,private:e}}angular.forEach(e.devices,function(e){h(e)&&r.push(e),n[e.name]=t.deviceScreenshotIds[e.name]||0,o[e.name]=t.deviceCheckedIds[e.name]||!1,i[e.name]=t.deviceRandom[e.name]||(new Date).getTime()})}),t.mapMarkers=a,t.devices=r,t.deviceScreenshotIds=n,t.deviceCheckedIds=o,t.deviceRandom=i,null==t.dynamicItems?t.dynamicItems=new m(t.devices):t.dynamicItems.reset(t.devices),t.dataHasLoaded=!0}function X(e,a){t.isFilterActive=a,t.filters=e,ne&&(N(),Q(JSON.parse(ne)))}function ee(e,a){t.deviceRandom[e]=(new Date).getTime(),t.deviceScreenshotIds[e]=a}var te="MR-UNDEFINED",ae="update",re="add_maintenance",ne=null,oe=[{type:"HTTP",name:ae,displayName:"Update Production"},{type:"MNT",name:re,displayName:"Schedule Maintenance"},{type:"HTTP",name:"remove_maintenance",displayName:"Remove Maintenance"}];t.areas=[],t.batchStatus=null,t.clearDeviceCommandForm=S,t.clearUpdateDevicesForm=E,t.commandsAvailable=[],t.commandsNavClose=b,t.commandsNavOpen=T,t.commandRequireParams=D,t.commandSelected={},t.commandSend=C,t.currentView=o.view||"map",t.CURRENT_VIEW_MAP="map",t.CURRENT_VIEW_LIST="list",t.dataHasLoaded=!1,t.devices=[],t.deviceCheckedIds={},t.deviceNumberViewLimit=6,t.deviceRandom={},t.deviceSelectAll=I,t.deviceScreenshotIds={},t.dynamicItems=null,t.editDeviceNavClose=$,t.editDeviceNavOpen=A,t.editDeviceIsOpen=!1,t.fabIsOpen=!1,t.fabSelectedMode="md-scale",t.filters=null,t.formatDeviceIdList=F,t.filtersNavClose=O,t.filtersNavOpen=_,t.getCustomServiceValues=M,t.groups=[],t.isFilterActive=!1,t.isOneDeviceAvailable=!1,t.lines=[],t.mapId="mainMap",t.mapMarkers=[],t.mapMarkerCluster=null,t.navClose=B,t.navShow=x,t.onCommandChange=W,t.onSearchTermChange=j,t.onUpdateDevicesCommandChange=K,t.pageTitle="Devices",t.searchTerm={term:""},t.setFilterData=X,t.showScreenshot=ee,t.showScreenshots=!1,t.stations=[],t.templates=[],t.UPDATE_DEVICES_COMMAND_UPDATE=ae,t.UPDATE_DEVICES_COMMAND_ADD_MAINTENANCE=re,t.UPDATE_DEVICES_COMMAND_REMOVE_MAINTENANCE="remove_maintenance",t.updateDevices=U,t.updateDevicesCommands=oe,t.updateDevicesCommandSelected={},t.updateDevicesNavClose=k,t.updateDevicesNavOpen=R,t.uploadDeviceNavClose=P,t.uploadDeviceNavOpen=w,t.uploadUrl="/devices/import/upload";var ie=t.$on(f.wizardSuccess,q),se=t.$on(f.wizardFailed,Y),ce=t.$on(v.syncSuccess,J),de=t.$on(g.statusSuccess,z);t.$on("$destroy",y),function(){t.setCurrentNavBarItem("devices"),t.setSummaryData({ok:"-",error:"-",warning:"-",maintenance:"-",lastUpdate:void 0}),t.mapMarkerCluster={iconCreateFunction:function(e){var t=V(e.getAllChildMarkers());return new L.divIcon({html:"<div><span><b>"+t.code+"</b></span></div>",className:"marker-cluster "+t.class,iconSize:new L.Point(40,40)})},clusterMouseOverFunction:function(e){var t=e.layer,a=t.getAllChildMarkers(),r="<b>Station Cluster Detail</b><br>";angular.forEach(a,function(e){var t=e.private,a=G(t);r+="<div class='clusterDetailBox'>",r+="<span>"+t.displayName+"</span> ",r+="<span class='statusCircle "+a.hostClass+"'></span>",r+="</div>"});var n=L.popup().setContent(r);t.bindPopup(n),t.openPopup()},maxClusterRadius:80},l.checkBatchStatus(),d.getCachedSyncData().then(function(e){Z(e),d.isSyncPollerRunning()||d.startSyncPoller()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})}),c.listGroups().then(function(e){t.groups=e.groups}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}()}function GroupsController(e,t,a,r,n,o,i,s){function c(){t.isUpdate=!1,t.editGroupNavOpen()}function d(){o.deleteGroups(t.selected).then(function(r){a.$broadcast(e.appSuccessNotify,{message:"GROUP_DELETED"}),t.refreshGroups()}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}function l(){t.isOpen=!1}function u(){t.groupForm.$setUntouched(),t.groupForm.$setPristine(),t.groupModel=angular.copy(S),i("edit-group-nav").close().then(function(){isOpen=!1})}function m(){t.disableFabToolbar(),i("edit-group-nav").toggle()}function p(){t.isOpen=!0}function f(){if(t.isFormSubmitting=!0,t.isUpdate){var n={groupId:t.selected[0],group:t.groupModel};o.updateGroup(n).then(function(r){t.isFormSubmitting=!1,a.$broadcast(e.appSuccessNotify,{message:"GROUP_UPDATED"}),t.isUpdate=!1,t.editGroupNavClose(),t.refreshGroups()}).catch(function(n){r.error(n),t.isFormSubmitting=!1,a.$broadcast(e.appErrorNotify,{message:n.data.error,description:n.data.description})})}else o.createGroup(t.groupModel).then(function(r){t.isFormSubmitting=!1,a.$broadcast(e.appSuccessNotify,{message:"GROUP_CREATED"}),t.editGroupNavClose(),t.refreshGroups()}).catch(function(n){r.error(n),t.isFormSubmitting=!1,a.$broadcast(e.appErrorNotify,{message:n.data.error,description:n.data.description})})}function v(){t.selected=[],o.listGroups().then(function(e){t.groups=e.groups}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}function g(e){var a=s.confirm().title(n("translate")("DELETE_CONFIRM_TITLE")).textContent(n("translate")("DELETE_CONFIRM_MSG")).ariaLabel(n("translate")("DELETE_CONFIRM_TITLE")).targetEvent(e).ok(n("translate")("OK")).cancel(n("translate")("CANCEL"));s.show(a).then(function(){t.deleteGroup()},function(){})}function h(){var n=t.selected[0];o.getGroup(n).then(function(e){t.isUpdate=!0,t.groupModel=e.group,t.editGroupNavOpen()}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}var S={name:""};t.addGroup=c,t.deleteGroup=d,t.disableFabToolbar=l,t.editGroupNavClose=u,t.editGroupNavOpen=m,t.enableFabToolbar=p,t.groupModel=angular.copy(S),t.handleSubmit=f,t.isFormSubmitting=!1,t.isOpen=!1,t.isUpdate=!1,t.pageTitle="GROUPS",t.query={order:"name",limit:10,page:1},t.refreshGroups=v,t.selected=[],t.selectedMode="md-scale",t.showConfirm=g,t.updateGroup=h,function(){t.setCurrentNavBarItem("groups"),t.setSummaryData(null),t.refreshGroups()}()}function HistoryController(e,t,a,r,n,o){function i(){t.form.filtersForm&&(t.form.filtersForm.$setUntouched(),t.form.filtersForm.$setPristine(),t.chartFilters=angular.copy(u))}function s(){var o=t.chartFilters;n.filterChart(t.dashboardId,o).then(function(e){t.kibanaDashUrl=e.iframeUrl,c()}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}function c(){angular.element(document.querySelector("#kibana-iframe")).remove();var e=document.createElement("iframe");e.src=t.kibanaDashUrl,e.id="kibana-iframe",angular.element(document.querySelector("#kibana-iframe-container")).html(e.outerHTML)}function d(){t.kibanaDashUrl="",n.getDashboardUrl(t.dashboardId,t.id).then(function(e){t.kibanaDashUrl=e.iframeUrl,i(),c()}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}var l=new Date,u={from:new Date(l.setHours(0,0,0,0)),to:new Date(l.setHours(23,59,59,0)),device:-1,station:-1,template:-1};t.chartFilters=u,t.dashboardId="",t.dashboards=[],t.devices=[],t.form={},t.filterChart=s,t.kibanaDashUrl="",t.lines=[],t.pageTitle="HISTORY",t.reset=d,t.stations=[],t.templates=[],t.STATION_UNDEFINED="MR-UNDEFINED",function(){t.setCurrentNavBarItem("history"),t.setSummaryData(null),i(),n.listDashboards().then(function(e){t.dashboards=e.dashboards,t.dashboardId=t.dashboards.length>0?t.dashboards[0].id:"",t.reset()}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})}),o.sync().then(function(e){t.lines=e.lines,t.stations=e.stations,t.templates=e.templates;var a=[];angular.forEach(t.stations,function(e){angular.forEach(e.devices,function(e){a.push(e)})}),t.devices=a}).catch(function(t){r.error(t),a.$broadcast(e.appErrorNotify,{message:t.data.error,description:t.data.description})})}()}function LoginController(e,t,a,r,n,o,i,s){function c(){i.login(t.credentials).then(function(a){e.$broadcast(o.loginSuccess),t.setCurrentUser(a)},function(t){e.$broadcast(s.appErrorNotify,{message:t.data.error,description:t.data.description})})}t.credentials={username:"",password:""},t.submitForm=c}function NavbarController(e,t,a,r){t.availableLanguages=r,t.currentLanguage="en"}function StationDetailController(e,t,a,r,n,o,i,s,c,d,l,u,m,p,f,v){function g(e){if(angular.isUndefined(t.floorSelected))return!1;return e.config.stationFloorId===t.floorSelected}function h(r){var o=s("translate")("WARNING_DELETE_DEVICES")+" "+s("translate")("DELETE_CONFIRM_MSG"),i=n.confirm().title(s("translate")("DELETE_CONFIRM_TITLE")).textContent(o).ariaLabel(s("translate")("DELETE_CONFIRM_TITLE")).targetEvent(r).ok(s("translate")("OK")).cancel(s("translate")("CANCEL"));n.show(i).then(function(){c.deleteStation(t.station.name,t.station).then(function(a){e.$broadcast(p.appSuccessNotify,{message:"STATION_DELETED"}),t.goto(t.returnToRoute)}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})},function(){})}function S(){U(),k(),R()}function E(){r("edit-device-nav").close()}function N(e){e.stopImmediatePropagation(),r("edit-device-nav").open()}function D(){t.stationDefaults=null,t.editStationIsOpen=!1,r("edit-station-nav").close()}function C(e){e.stopImmediatePropagation(),t.stationDefaults=angular.copy(t.station),t.editStationIsOpen=!0,i(function(){r("edit-station-nav").open()},100)}function b(e,t){var a=e.services?e.services:{},r=null;for(var n in a)if(a.hasOwnProperty(n)){var o=a[n];if(o.custom){r=o;break}}return r&&r.customServices?r.customServices.find(function(e){return e.name===t}):null}function T(e){return-1==e?"stationMap":"stationMap_"+t.id+"_floor_"+e}function y(e){if(-1==e)return t.stationImageBasePath+t.station.custom.position.mapUrl;var r=(t.station.custom.floors?t.station.custom.floors:[]).find(function(t){return t.name==e});return r?t.stationImageBasePath+r.position.mapUrl:(a.error("No image available for the current floor"),"")}function I(){var e={};angular.forEach(t.station.devices,function(a,r){if(g(a)){var n=a.name,o=a.displayName,i=a.config.position.lat,s=a.config.position.lng,c={device:a,goto:t.goto};e[n]={lat:i,lng:s,title:o,icon:{type:"div",iconSize:[40,40],html:"<div><span><b>"+(0==a.maintenance?a.error?"ERR":a.warning?"WAR":"OK":"MT")+"</b></span></div>",className:"marker-cluster marker-cluster-"+(0==a.maintenance?a.error?"error":a.warning?"warning":"ok":"maintenance"),popupAnchor:[0,0]},popupTemplate:u,popupContent:c,private:a}}}),t.markers=e}function $(e,t){_(t.data)}function A(a,r){a.preventDefault(),a.stopPropagation(),e.$broadcast(p.appSuccessNotify,{message:r.message}),r.closeSideBar&&i(function(){t.editDeviceNavClose(),t.editStationNavClose(),d.updateStationCachedData(r.data),d.restartSyncPoller()},0)}function O(t,a){t.preventDefault(),t.stopPropagation(),e.$broadcast(p.appErrorNotify,{message:a.message,description:a.description})}function _(t){if(!t)return a.debug("No data available"),void e.$broadcast(p.appErrorNotify,{message:"NO_DATA_AVAILABLE"});var r=JSON.stringify(t);M!==r?(M=r,L(t)):a.debug("Data not changed")}function L(e){t.setSummaryData(e.summary),t.areas=e.areas,t.lines=e.lines,t.stations=e.stations,t.templates=e.templates;var a={},r=e.stationsTree||[];t.station=angular.extend(t.station,r[t.id]);var n=[];angular.forEach(t.station.devices,function(e,r){if(n.push(e),g(e)){var o=e.name,i=e.displayName,s=e.config.position.lat,c=e.config.position.lng,d={device:e,goto:t.goto};a[o]={lat:s,lng:c,title:i,icon:{type:"div",iconSize:[40,40],html:"<div><span><b>"+(0==e.maintenance?e.error?"ERR":e.warning?"WAR":"OK":"MT")+"</b></span></div>",className:"marker-cluster marker-cluster-"+(0==e.maintenance?e.error?"error":e.warning?"warning":"ok":"maintenance"),popupAnchor:[0,0]},popupTemplate:u,popupContent:d,private:e}}}),t.markers=a,t.devices=n,r[t.id]&&(t.deviceDefaults=angular.copy({config:{stationName:t.id,stationFloorId:t.floorSelected}})),null==t.dynamicItems?t.dynamicItems=new m(t.devices):t.dynamicItems.reset(t.devices),t.dataHasLoaded=!0}var M=null;t.areas=[],t.currentView=o.view||"map",t.CURRENT_VIEW_MAP="map",t.CURRENT_VIEW_LIST="list",t.dataHasLoaded=!1,t.deviceDefaults={},t.devices=[],t.deleteStation=h,t.dynamicItems=null,t.id=o.id,t.center={lat:50,lng:50,zoom:3},t.editDeviceNavClose=E,t.editDeviceNavOpen=N,t.editStationNavClose=D,t.editStationNavOpen=C,t.fabIsOpen=!1,t.fabSelectedMode="md-scale",t.floorSelected=-1,t.getCustomServiceValues=b,t.getFloorMapId=T,t.getFloorImageOverlayUrl=y,t.groups=[],t.lines=[],t.mapId="stationMap_"+t.id,t.markers=[],t.returnToRoute=o.returnToRoute?o.returnToRouteView?o.returnToRoute+"/"+o.returnToRouteView:o.returnToRoute:"/stations",t.station={},t.stations=[],t.editStationIsOpen=!1,t.stationDefaults={},t.templates=[];var U=t.$on(f.wizardSuccess,A),k=t.$on(f.wizardFailed,O),R=t.$on(v.syncSuccess,$);t.$watch("floorSelected",I),t.$on("$destroy",S),function(){t.setCurrentNavBarItem("devices"),t.setSummaryData({ok:"-",error:"-",warning:"-",maintenance:"-",lastUpdate:void 0}),d.getCachedSyncData().then(function(e){_(e),d.isSyncPollerRunning()||d.startSyncPoller()}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})}),l.listGroups().then(function(e){t.groups=e.groups}).catch(function(t){a.error(t),e.$broadcast(p.appErrorNotify,{message:t.data.error,description:t.data.description})})}()}function StationsController(e,t,a,r,n,o,i,s,c,d,l,u,m,p,f){function v(t,r){var o=n("translate")("WARNING_DELETE_DEVICES")+" "+n("translate")("DELETE_CONFIRM_MSG"),i=s.confirm().title(n("translate")("DELETE_CONFIRM_TITLE")).textContent(o).ariaLabel(n("translate")("DELETE_CONFIRM_TITLE")).targetEvent(t).ok(n("translate")("OK")).cancel(n("translate")("CANCEL"));s.show(i).then(function(){c.deleteStation(r.name,r).then(function(t){e.$broadcast(m.appSuccessNotify,{message:"STATION_DELETED"}),b()}).catch(function(t){a.error(t),e.$broadcast(m.appErrorNotify,{message:t.data.error,description:t.data.description})})},function(){})}function g(){t.stationDefaults=null,t.editStationIsOpen=!1,i("edit-station-nav").close()}function h(e,a){e.stopImmediatePropagation(),t.stationDefaults=t.stations.find(function(e){return e.name==a}),t.editStationIsOpen=!0,r(function(){i("edit-station-nav").open()},100)}function S(){I(),$(),A()}function E(e,t){C(t.data)}function N(a,n){a.preventDefault(),a.stopPropagation(),e.$broadcast(m.appSuccessNotify,{message:n.message}),n.closeSideBar&&r(function(){t.editStationNavClose(),d.updateStationCachedData(n.data),d.restartSyncPoller()},0)}function D(t,a){t.preventDefault(),t.stopPropagation(),e.$broadcast(m.appErrorNotify,{message:a.message,description:a.description})}function C(t){if(!t)return a.debug("No data available"),void e.$broadcast(m.appErrorNotify,{message:"NO_DATA_AVAILABLE"});var r=JSON.stringify(t);y!==r?(y=r,b(t)):a.debug("Data not changed")}function b(e){t.setSummaryData(e.summary),t.lines=e.lines,t.stations=e.stations;var a={},r={};angular.forEach(t.stations,function(e,a){e.deviceCount=Object.keys(e.devices).length;var n=e.name,o=e.displayName,i=e.custom.position.lat,s=e.custom.position.lng;if(n!==T){var c={station:e,goto:t.goto,editStationNavOpen:t.editStationNavOpen,deleteStation:t.deleteStation};r[n]={lat:i,lng:s,title:o,icon:{type:"div",iconSize:[40,40],html:"<div><span><b></b></span></div>",className:"marker-cluster marker-cluster-empty",popupAnchor:[0,0]},popupTemplate:l,popupContent:c,private:e}}}),t.markers=r,t.stationCheckedIds=a,null==t.dynamicItems?t.dynamicItems=new u(t.stations):t.dynamicItems.reset(t.stations),t.dataHasLoaded=!0}var T="MR-UNDEFINED",y=null;t.currentView=o.view||"map",t.CURRENT_VIEW_MAP="map",t.CURRENT_VIEW_LIST="list",t.dataHasLoaded=!1,t.deleteStation=v,t.dynamicItems=null,t.editStationNavClose=g,t.editStationNavOpen=h,t.fabIsOpen=!1,t.fabSelectedMode="md-scale",t.mapId="mainStationMap",t.mapMarkers=[],t.mapMarkerCluster=null,t.station={},t.stationCheckedIds={},t.stations=[],t.editStationIsOpen=!1,t.stationDefaults=null,t.lines=[],t.mapEditMarkers={};var I=t.$on(p.wizardSuccess,N),$=t.$on(p.wizardFailed,D),A=t.$on(f.syncSuccess,E);t.$on("$destroy",S),function(){t.setCurrentNavBarItem("stations"),t.setSummaryData({ok:"-",error:"-",warning:"-",maintenance:"-",lastUpdate:void 0}),t.mapMarkerCluster={iconCreateFunction:function(e){return e.getAllChildMarkers(),new L.divIcon({html:"<div><span><b></b></span></div>",className:"marker-cluster marker-cluster-empty",iconSize:new L.Point(40,40)})},clusterMouseOverFunction:function(e){var t=e.layer,a=t.getAllChildMarkers(),r="<b>Station Cluster Detail</b><br>";angular.forEach(a,function(e){var t=e.private;r+="<div class='clusterDetailBox'>",r+="<span>"+t.displayName+"</span> ",r+="<span class='statusCircle empty-host'></span>",r+="</div>"});var n=L.popup().setContent(r);t.bindPopup(n),t.openPopup()},maxClusterRadius:80},d.getCachedSyncData().then(function(e){C(e),d.isSyncPollerRunning()||d.startSyncPoller()}).catch(function(t){a.error(t),e.$broadcast(m.appErrorNotify,{message:t.data.error,description:t.data.description})})}()}function UsersController(e,t,a,r,n,o,i,s,c,d){function l(){e.isUpdate=!1,e.editUserNavOpen("right")}function u(){c.deleteUsers(e.selected).then(function(a){t.$broadcast(s.appSuccessNotify,{message:"USER_DELETED"}),e.refreshUsers()}).catch(function(a){n.error(a),t.$broadcast(s.appErrorNotify,{message:a.data.error,description:a.data.description}),e.refreshUsers()})}function m(){e.isOpen=!1}function p(){e.userForm.$setUntouched(),e.userForm.$setPristine(),e.userModel=angular.copy(N),r("edit-user-nav").close()}function f(){e.userForm.$setUntouched(),e.userForm.$setPristine(),r("edit-user-nav").toggle()}function v(){e.isOpen=!0}function g(){if(e.isFormSubmitting=!0,e.isUpdate){var a={userId:e.selected[0],user:e.userModel};c.updateUser(a).then(function(a){e.isFormSubmitting=!1,t.$broadcast(s.appSuccessNotify,{message:"USER_UPDATED"}),e.isUpdate=!1,e.editUserNavClose(),e.refreshUsers()}).catch(function(a){n.error(a),e.isFormSubmitting=!1,t.$broadcast(s.appErrorNotify,{message:a.data.error,description:a.data.description})})}else c.createUser(e.userModel).then(function(a){e.isFormSubmitting=!1,t.$broadcast(s.appSuccessNotify,{message:"USER_CREATED"}),e.editUserNavClose(),e.refreshUsers()}).catch(function(a){n.error(a),e.isFormSubmitting=!1,t.$broadcast(s.appErrorNotify,{message:a.data.error,description:a.data.description})})}function h(){e.selected=[],c.listUsers().then(function(a){e.users=a.users;for(var r in a.users){var o=a.users[r];switch(o.idRole){case e.userRoles.superadmin:o.roleName="SuperAdmin";break;case e.userRoles.admin:o.roleName="Admin";break;case e.userRoles.maintainer:o.roleName="Maintainer";break;case e.userRoles.operator:o.roleName="Operator";break;default:o.roleName="-"}}d.listGroups().then(function(t){e.groups=t.groups}).catch(function(e){n.error(e),t.$broadcast(s.appErrorNotify,{message:e.data.error,description:e.data.description})})}).catch(function(e){n.error(e),t.$broadcast(s.appErrorNotify,{message:e.data.error,description:e.data.description})})}function S(t){var r=a.confirm().title(o("translate")("DELETE_CONFIRM_TITLE")).textContent(o("translate")("DELETE_CONFIRM_MSG")).ariaLabel(o("translate")("DELETE_CONFIRM_TITLE")).targetEvent(t).ok(o("translate")("OK")).cancel(o("translate")("CANCEL"));a.show(r).then(function(){e.deleteUser()},function(){})}function E(){var a=e.selected[0];c.getUser(a).then(function(t){e.isUpdate=!0,e.userModel=t.user,e.userModel.password="",e.userModel.confirmPassword="",e.editUserNavOpen()}).catch(function(e){n.error(e),t.$broadcast(s.appErrorNotify,{message:e.data.error,description:e.data.description})})}var N={name:"",surname:"",email:"",password:"",confirmPassword:"",idRole:null,idGroup:null,idRedmine:null,idKibana:null};e.addUser=l,e.deleteUser=u,e.disableFabToolbar=m,e.editUserNavClose=p,e.editUserNavOpen=f,e.enableFabToolbar=v,e.handleSubmit=g,e.isFormSubmitting=!1,e.isOpen=!1,e.isUpdate=!1,e.pageTitle="USERS",e.query={order:"name",limit:10,page:1},e.refreshUsers=h,e.selected=[],e.selectedMode="md-scale",e.showConfirm=S,e.updateUser=E,e.userModel=angular.copy(N),e.userRoles=i,function(){e.setCurrentNavBarItem("users"),e.setSummaryData(null),e.refreshUsers()}()}ApplicationController.$inject=["$rootScope","$scope","$window","$location","$timeout","$log","$filter","$sce","toastr","USER_ROLES","AUTH_EVENTS","APPLICATION_EVENTS","PATHS","AuthService"],AuditLogController.$inject=["$scope","$rootScope","$log","$mdDialog","$filter","auditLogService","APPLICATION_EVENTS"],DeviceDetailController.$inject=["$rootScope","$scope","$log","$routeParams","$filter","$timeout","$mdSidenav","$mdDialog","syncService","devicesService","groupsService","ticketsService","kibanaService","APPLICATION_EVENTS","WIZARD_EVENTS","SYNC_EVENTS"],DevicesController.$inject=["$rootScope","$scope","$log","$timeout","$filter","$routeParams","$mdSidenav","devicesService","groupsService","syncService","bacthService","popupStationTemplate","DynamicItems","APPLICATION_EVENTS","WIZARD_EVENTS","SYNC_EVENTS","BATCH_EVENTS"],GroupsController.$inject=["APPLICATION_EVENTS","$scope","$rootScope","$log","$filter","groupsService","$mdSidenav","$mdDialog"],HistoryController.$inject=["APPLICATION_EVENTS","$scope","$rootScope","$log","kibanaService","devicesService"],LoginController.$inject=["$rootScope","$scope","$location","$route","$log","AUTH_EVENTS","AuthService","APPLICATION_EVENTS"],NavbarController.$inject=["$rootScope","$scope","$translate","AVAILABLE_LANGUAGES"],StationDetailController.$inject=["$rootScope","$scope","$log","$mdSidenav","$mdDialog","$routeParams","$timeout","$filter","stationsService","syncService","groupsService","popupDeviceTemplate","DynamicItems","APPLICATION_EVENTS","WIZARD_EVENTS","SYNC_EVENTS"],StationsController.$inject=["$rootScope","$scope","$log","$timeout","$filter","$routeParams","$mdSidenav","$mdDialog","stationsService","syncService","popupStationTemplate","DynamicItems","APPLICATION_EVENTS","WIZARD_EVENTS","SYNC_EVENTS"],UsersController.$inject=["$scope","$rootScope","$mdDialog","$mdSidenav","$log","$filter","USER_ROLES","APPLICATION_EVENTS","usersService","groupsService"];var controllersDomain=angular.module("SolariMonitor.controllers",[]);controllersDomain.controller("ApplicationController",ApplicationController),controllersDomain.controller("AuditLogController",AuditLogController),controllersDomain.controller("DeviceDetailController",DeviceDetailController),controllersDomain.controller("DevicesController",DevicesController),controllersDomain.controller("GroupsController",GroupsController),controllersDomain.controller("HistoryController",HistoryController),controllersDomain.controller("LoginController",LoginController),controllersDomain.controller("NavbarController",NavbarController),controllersDomain.controller("StationDetailController",StationDetailController),controllersDomain.controller("StationsController",StationsController),controllersDomain.controller("UsersController",UsersController);
//# sourceMappingURL=maps/controllers.min.js.map
